<div id="topBar"></div>

<ng-container *ngFor="let win of wines | paginate: { itemsPerPage: 2, currentPage: p, id: 'first' }">
  <mat-card>
    <mat-card-title>{{win.title}}</mat-card-title>
    <mat-card-subtitle>{{win.variety}}</mat-card-subtitle>
    <mat-card-content>{{win.description}}</mat-card-content>
    <mat-card-footer>{{win.taster_name}} {{win.taster_twitter_handle}}</mat-card-footer>
  </mat-card>
  <ng-container *ngFor="let wcom of win.comments">
    <mat-card>
      <mat-card-subtitle>{{wcom.commenter}}</mat-card-subtitle>
      <mat-card-content>{{wcom.comment}}</mat-card-content>
    </mat-card>
  </ng-container>
  <mat-card>
    <form>
      <mat-form-field class="example-full-width">
        <input matInput [(ngModel)]="name" required placeholder="Your name" value="" [ngModelOptions]="{standalone: true}">
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <textarea [(ngModel)]="commentBody" required matInput placeholder="Leave a comment" [ngModelOptions]="{standalone: true}"></textarea>
      </mat-form-field>
      <button mat-raised-button (click)="onSubmit(win.id, name, commentBody)">Submit Comment</button>
    </form>
  </mat-card>

  <mat-divider></mat-divider>
  <br>
  <br>
  <br>
  <br>
</ng-container>

<pagination-controls (pageChange)="p = $event" id="first"></pagination-controls>